using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
public class Controls : MonoBehaviour{
    private Rigidbody2D rb;
    public Animator animator;
    public float moveSpeed;

    public float x,y;
    private bool isWalking;
    private Vector3 moveDir;

    private void Start(){

        rb = GetComponent<Rigidbody2D>();
    }

    private void Update(){
        x = Input.GetAxisRaw("Horizontal");
        y = Input.GetAxisRaw("Vertical");

        if(x !=0 || y!=0 && SceneManager.GetActiveScene().name=="World"){

            animator.SetFloat("X",x);
            animator.SetFloat("Y",y);

            if (!isWalking && SceneManager.GetActiveScene().name=="World"){
                isWalking=true;
                animator.SetBool("IsMoving",isWalking);
            }
        }else{
            if(isWalking && SceneManager.GetActiveScene().name=="World"){
                isWalking = false;
                animator.SetBool("IsMoving",isWalking);
                StopMoving();
            }
        }


        moveDir = new Vector3(x,y).normalized;
    }

    private void StopMoving(){
        rb.velocity = Vector3.zero;
    }

    private void FixedUpdate(){

        rb.velocity = moveDir * moveSpeed * Time.deltaTime;
    }


}


 /*  
    public Animator animator;
    // Start is called before the first frame update
    void Start()
    {
        Debug.Log("Scene Name: "+SceneManager.GetActiveScene().name);
        animator = GetComponent<Animator>();
    }

    // Update is called once per frame
    void Update()
    {
        if(Input.GetKey(KeyCode.W) == true && SceneManager.GetActiveScene().name=="World")
        {
            Debug.Log("Player wants to move up.");
            animator.SetBool("IsWalkingUp",true);
        } 
        else
        {
            animator.SetBool("IsWalkingUp",false);
        }

        if(Input.GetKey(KeyCode.A) == true && SceneManager.GetActiveScene().name=="World")
        {
            Debug.Log("Player wants to move left.");
            animator.SetBool("IsWalkingLeft",true);
        } 
        else
        {
            animator.SetBool("IsWalkingLeft",false);
        }
    } */